(()=>{"use strict";var e={176(e,a,l){var t=l(751),s=l(615),o=l(29),i=l(641);const r={id:"app"},n={class:"app-header"},c={class:"container"},u={class:"header-content"},d={class:"header-actions"},g={class:"upload-btn"},p={class:"app-main"};function v(e,a,l,t,s,o){const v=(0,i.g2)("DataManagement"),m=(0,i.g2)("router-view"),k=(0,i.g2)("ImageUploadModal");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("header",n,[(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[a[2]||(a[2]=(0,i.Lk)("div",{class:"logo"},[(0,i.Lk)("i",{class:"fas fa-images"}),(0,i.Lk)("h1",null,"Vue图片画廊")],-1)),(0,i.Lk)("div",d,[(0,i.bF)(v),(0,i.Lk)("div",g,[(0,i.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>t.openUploadModal&&t.openUploadModal(...e)),class:"btn-primary"},[...a[1]||(a[1]=[(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1),(0,i.eW)(" 上传图片 ",-1)])])])])])])]),(0,i.Lk)("main",p,[(0,i.bF)(m)]),a[3]||(a[3]=(0,i.Lk)("footer",{class:"app-footer"},[(0,i.Lk)("div",{class:"container"},[(0,i.Lk)("p",null,"© Vue图片画廊应用 | Vue3图片画廊大作业 | 数据自动保存到本地存储")])],-1)),t.showUploadModal?((0,i.uX)(),(0,i.Wv)(k,{key:0,onClose:t.closeUploadModal,onUploadSuccess:t.handleUploadSuccess},null,8,["onClose","onUploadSuccess"])):(0,i.Q3)("",!0)])}var m=l(953),k=l(33);const f={class:"modal-container"},L={class:"modal-header"},y={class:"modal-content"},b={key:0,class:"upload-prompt"},I={key:1,class:"image-preview"},h=["src"],C={class:"image-info"},w={key:0,class:"upload-progress"},E={class:"progress-bar"},D={class:"progress-text"},F={class:"form-group"},U={class:"form-group"},_={class:"form-group"},T=["value"],K={class:"form-group"},X={class:"tags-input"},S={class:"tags-list"},A=["onClick"],R={class:"tag-input-container"},P={class:"modal-footer"},x=["disabled"];function M(e,a,l,s,o,r){return(0,i.uX)(),(0,i.CE)("div",{class:"modal-overlay",onClick:a[15]||(a[15]=(0,t.D$)((...e)=>s.close&&s.close(...e),["self"]))},[(0,i.Lk)("div",f,[(0,i.Lk)("div",L,[a[17]||(a[17]=(0,i.Lk)("h2",null,"上传图片",-1)),(0,i.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=(...e)=>s.close&&s.close(...e))},[...a[16]||(a[16]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])])]),(0,i.Lk)("div",y,[(0,i.Lk)("div",{class:(0,k.C4)(["upload-area",{"has-image":s.imageFile,dragover:s.isDragging}]),onClick:a[3]||(a[3]=(...e)=>s.triggerFileInput&&s.triggerFileInput(...e)),onDragover:a[4]||(a[4]=(...e)=>s.handleDragOver&&s.handleDragOver(...e)),onDrop:a[5]||(a[5]=(...e)=>s.handleDrop&&s.handleDrop(...e))},[(0,i.Lk)("input",{type:"file",ref:"fileInput",onChange:a[1]||(a[1]=(...e)=>s.handleFileSelect&&s.handleFileSelect(...e)),accept:"image/*",style:{display:"none"}},null,544),s.imageFile?((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("img",{src:s.previewUrl,alt:"预览",class:"preview-image"},null,8,h),(0,i.Lk)("div",C,[(0,i.Lk)("p",null,(0,k.v_)(s.imageFile.name),1),(0,i.Lk)("p",null,(0,k.v_)((s.imageFile.size/1024).toFixed(2))+" KB",1)]),(0,i.Lk)("button",{class:"remove-btn",onClick:a[2]||(a[2]=(0,t.D$)((...e)=>s.removeImage&&s.removeImage(...e),["stop"]))},[...a[19]||(a[19]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)])])])):((0,i.uX)(),(0,i.CE)("div",b,[...a[18]||(a[18]=[(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1),(0,i.Lk)("h3",null,"点击或拖拽图片到这里",-1),(0,i.Lk)("p",null,"支持 JPG, PNG, GIF 格式，建议尺寸 800x600",-1),(0,i.Lk)("p",{class:"upload-tip"},"图片将保存到浏览器本地存储中",-1)])]))],34),s.uploadProgress>0?((0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("div",E,[(0,i.Lk)("div",{class:"progress-fill",style:(0,k.Tr)({width:s.uploadProgress+"%"})},null,4)]),(0,i.Lk)("div",D,(0,k.v_)(s.uploadProgress)+"%",1)])):(0,i.Q3)("",!0),(0,i.Lk)("form",{onSubmit:a[12]||(a[12]=(0,t.D$)((...e)=>s.uploadImage&&s.uploadImage(...e),["prevent"])),class:"upload-form"},[(0,i.Lk)("div",F,[a[20]||(a[20]=(0,i.Lk)("label",{for:"upload-title"},"标题 *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"upload-title","onUpdate:modelValue":a[6]||(a[6]=e=>s.imageData.title=e),placeholder:"输入图片标题",required:""},null,512),[[t.Jo,s.imageData.title]])]),(0,i.Lk)("div",U,[a[21]||(a[21]=(0,i.Lk)("label",{for:"upload-description"},"描述",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"upload-description","onUpdate:modelValue":a[7]||(a[7]=e=>s.imageData.description=e),placeholder:"输入图片描述",rows:"3"},null,512),[[t.Jo,s.imageData.description]])]),(0,i.Lk)("div",_,[a[23]||(a[23]=(0,i.Lk)("label",{for:"upload-category"},"分类 *",-1)),(0,i.bo)((0,i.Lk)("select",{id:"upload-category","onUpdate:modelValue":a[8]||(a[8]=e=>s.imageData.category=e),required:""},[a[22]||(a[22]=(0,i.Lk)("option",{value:"",disabled:""},"选择分类",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.categories,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,k.v_)(e),9,T))),128))],512),[[t.u1,s.imageData.category]])]),(0,i.Lk)("div",K,[a[26]||(a[26]=(0,i.Lk)("label",null,"标签",-1)),(0,i.Lk)("div",X,[(0,i.Lk)("div",S,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.imageData.tags,(e,l)=>((0,i.uX)(),(0,i.CE)("span",{key:l,class:"tag"},[(0,i.eW)((0,k.v_)(e)+" ",1),(0,i.Lk)("button",{type:"button",class:"remove-tag",onClick:e=>s.removeTag(l)},[...a[24]||(a[24]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])],8,A)]))),128))]),(0,i.Lk)("div",R,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=e=>s.newTag=e),placeholder:"输入标签后按Enter",onKeydown:a[10]||(a[10]=(0,t.jR)((0,t.D$)((...e)=>s.addTag&&s.addTag(...e),["prevent"]),["enter"]))},null,544),[[t.Jo,s.newTag]]),(0,i.Lk)("button",{type:"button",class:"add-tag-btn",onClick:a[11]||(a[11]=(...e)=>s.addTag&&s.addTag(...e))},[...a[25]||(a[25]=[(0,i.Lk)("i",{class:"fas fa-plus"},null,-1)])])])])])],32)]),(0,i.Lk)("div",P,[(0,i.Lk)("button",{type:"button",class:"btn-secondary",onClick:a[13]||(a[13]=(...e)=>s.close&&s.close(...e))}," 取消 "),(0,i.Lk)("button",{type:"submit",class:"btn-primary",onClick:a[14]||(a[14]=(...e)=>s.uploadImage&&s.uploadImage(...e)),disabled:!s.imageFile||s.isUploading},[a[27]||(a[27]=(0,i.Lk)("i",{class:"fas fa-upload"},null,-1)),(0,i.eW)(" "+(0,k.v_)(s.isUploading?"上传中...":"上传图片"),1)],8,x)])])])}const O=(0,s.nY)("image",()=>{const e=()=>{const e=localStorage.getItem("imageGalleryImages");if(e)try{return JSON.parse(e)}catch(l){return console.error("Failed to parse images from localStorage:",l),a()}return a()},a=()=>[{id:1,title:"自然风光",description:"美丽的山景和湖泊",category:"自然",url:"/images/山景湖泊.jpg",tags:["山","湖","自然"],createdAt:"2026-1-01",filter:"none"},{id:2,title:"城市夜景",description:"繁华的城市灯光",category:"城市",url:"/images/城市夜景.jpg",tags:["城市","夜景","建筑"],createdAt:"2026-01-02",filter:"none"},{id:3,title:"海滩日落",description:"宁静的海滩日落景色",category:"自然",url:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600&q=80",tags:["海滩","日落","海洋"],createdAt:"2026-01-03",filter:"none"},{id:4,title:"森林小径",description:"阳光穿过森林的小径",category:"自然",url:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600&q=80",tags:["森林","树木","小径"],createdAt:"2026-01-04",filter:"none"},{id:5,title:"现代建筑",description:"当代建筑设计",category:"建筑",url:"/images/现代建筑.jpg",tags:["建筑","现代","设计"],createdAt:"2026-01-05",filter:"none"},{id:6,title:"美食摄影",description:"美味的食物特写",category:"食物",url:"https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600&q=80",tags:["食物","美食","摄影"],createdAt:"2026-01-06",filter:"none"},{id:7,title:"动物世界",description:"可爱的野生动物",category:"动物",url:"https://images.unsplash.com/photo-1557050543-4d5f4e07ef46?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600&q=80",tags:["动物","野生动物","自然"],createdAt:"2026-01-07",filter:"none"},{id:8,title:"抽象艺术",description:"现代抽象艺术作品",category:"艺术",url:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600&q=80",tags:["艺术","抽象","创意"],createdAt:"2026-01-08",filter:"none"},{id:9,title:"冬季雪景",description:"白雪覆盖的冬季景观",category:"自然",url:"/images/冬季景观.jpg",tags:["雪","冬季","寒冷"],createdAt:"2026-01-09",filter:"none"},{id:10,title:"科技未来",description:"科技与未来的概念",category:"科技",url:"/images/科技未来.jpg",tags:["科技","未来","数字"],createdAt:"2026-01-10",filter:"none"}],l=(0,m.KR)(e()),t=()=>{try{localStorage.setItem("imageGalleryImages",JSON.stringify(l.value))}catch(e){console.error("Failed to save images to localStorage:",e)}};(0,i.wB)(l,()=>{t()},{deep:!0});const s=(0,m.KR)(["全部","自然","城市","建筑","食物","动物","艺术","科技","人物","旅行"]),o=(0,m.KR)("全部"),r=(0,m.KR)(null),n=(0,m.KR)(null),c=(0,i.EW)(()=>"全部"===o.value?l.value:l.value.filter(e=>e.category===o.value)),u=(0,i.EW)(()=>l.value),d=e=>{const a={id:Date.now(),...e,createdAt:(new Date).toISOString().split("T")[0],filter:"none"};l.value.unshift(a)},g=(e,a)=>{const t=l.value.findIndex(a=>a.id===e);-1!==t&&(l.value[t]={...l.value[t],...a})},p=e=>{const a=l.value.findIndex(a=>a.id===e);-1!==a&&l.value.splice(a,1)},v=e=>{r.value=e},k=()=>{r.value=null},f=e=>{n.value=e?{...e}:null},L=(e,a)=>{const t=l.value.findIndex(a=>a.id===e);-1!==t&&(l.value[t].filter=a)},y=()=>{l.value=a(),localStorage.removeItem("imageGalleryImages")},b=()=>{const e=JSON.stringify(l.value,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(e),t="image-gallery-data.json",s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",t),s.click()},I=e=>{try{const a=JSON.parse(e);if(Array.isArray(a))return l.value=a,!0}catch(a){console.error("Failed to import data:",a)}return!1};return{images:l,categories:s,selectedCategory:o,currentPreviewImage:r,currentEditImage:n,filteredImages:c,getImages:u,addImage:d,updateImage:g,deleteImage:p,setPreviewImage:v,clearPreviewImage:k,setEditImage:f,applyFilter:L,clearAllData:y,exportData:b,importData:I}}),W={name:"ImageUploadModal",emits:["close","upload-success"],setup(e,{emit:a}){const l=O(),t=(0,m.KR)(null),s=(0,m.KR)(null),o=(0,m.KR)(""),r=(0,m.KR)(""),n=(0,m.KR)(!1),c=(0,m.KR)(0),u=(0,m.KR)(!1),d=(0,m.KR)({title:"",description:"",category:"自然",tags:[],url:""}),g=(0,i.EW)(()=>l.categories.filter(e=>"全部"!==e)),p=()=>{a("close")},v=()=>{t.value.click()},k=e=>{const a=e.target.files[0];f(a)},f=e=>{if(e){if(!e.type.startsWith("image/"))return void alert("请选择图片文件（JPG、PNG、GIF）");if(e.size>10485760)return void alert("图片大小不能超过10MB");s.value=e;const a=new FileReader;if(a.onload=e=>{o.value=e.target.result,d.value.url=e.target.result},a.readAsDataURL(e),!d.value.title){const a=e.name.split(".").slice(0,-1).join(".");d.value.title=a.replace(/[_-]/g," ")}}},L=()=>{s.value=null,o.value="",d.value.url=""},y=()=>{r.value.trim()&&!d.value.tags.includes(r.value.trim())&&(d.value.tags.push(r.value.trim()),r.value="")},b=e=>{d.value.tags.splice(e,1)},I=e=>{e.preventDefault(),n.value=!0,e.dataTransfer.dropEffect="copy"},h=()=>{n.value=!1},C=e=>{e.preventDefault(),n.value=!1;const a=e.dataTransfer.files[0];a&&f(a)},w=async()=>{if(!s.value)return void alert("请选择要上传的图片");if(!d.value.title.trim())return void alert("请输入图片标题");if(!d.value.category)return void alert("请选择图片分类");u.value=!0,c.value=0;const e=setInterval(()=>{c.value<90&&(c.value+=10)},100);try{await new Promise(e=>setTimeout(e,1500)),clearInterval(e),c.value=100,setTimeout(()=>{a("upload-success",d.value),u.value=!1,c.value=0,E()},300)}catch(l){clearInterval(e),u.value=!1,c.value=0,alert("上传失败，请重试"),console.error("Upload error:",l)}},E=()=>{s.value=null,o.value="",r.value="",d.value={title:"",description:"",category:"自然",tags:[],url:""},t.value&&(t.value.value="")};return{fileInput:t,imageFile:s,previewUrl:o,newTag:r,imageData:d,categories:g,isDragging:n,uploadProgress:c,isUploading:u,close:p,triggerFileInput:v,handleFileSelect:k,removeImage:L,addTag:y,removeTag:b,handleDragOver:I,handleDragLeave:h,handleDrop:C,uploadImage:w}}};var j=l(262);const J=(0,j.A)(W,[["render",M],["__scopeId","data-v-647ca834"]]),G=J,$={class:"data-management"},V={key:0,class:"dropdown-menu"};function q(e,a,l,t,s,o){return(0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("button",{class:"management-btn",onClick:a[0]||(a[0]=(...e)=>t.toggleDropdown&&t.toggleDropdown(...e))},[...a[5]||(a[5]=[(0,i.Lk)("i",{class:"fas fa-database"},null,-1),(0,i.eW)(" 数据管理 ",-1)])]),t.showDropdown?((0,i.uX)(),(0,i.CE)("div",V,[(0,i.Lk)("div",{class:"dropdown-item",onClick:a[1]||(a[1]=(...e)=>t.exportData&&t.exportData(...e))},[...a[6]||(a[6]=[(0,i.Lk)("i",{class:"fas fa-download"},null,-1),(0,i.Lk)("span",null,"导出数据",-1)])]),(0,i.Lk)("div",{class:"dropdown-item",onClick:a[2]||(a[2]=(...e)=>t.triggerImport&&t.triggerImport(...e))},[...a[7]||(a[7]=[(0,i.Lk)("i",{class:"fas fa-upload"},null,-1),(0,i.Lk)("span",null,"导入数据",-1)])]),(0,i.Lk)("div",{class:"dropdown-item",onClick:a[3]||(a[3]=(...e)=>t.clearData&&t.clearData(...e)),style:{color:"#e53e3e"}},[...a[8]||(a[8]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1),(0,i.Lk)("span",null,"清除所有数据",-1)])])])):(0,i.Q3)("",!0),(0,i.Lk)("input",{type:"file",ref:"importInput",onChange:a[4]||(a[4]=(...e)=>t.importData&&t.importData(...e)),accept:".json",style:{display:"none"}},null,544)])}const N={name:"DataManagement",setup(){const e=O(),a=(0,m.KR)(!1),l=(0,m.KR)(null),t=()=>{a.value=!a.value},s=e=>{e.target.closest(".data-management")||(a.value=!1)};document.addEventListener("click",s);const o=()=>{e.exportData(),a.value=!1,alert("数据已导出为JSON文件")},i=()=>{l.value.click(),a.value=!1},r=a=>{const l=a.target.files[0];if(!l)return;const t=new FileReader;t.onload=a=>{const l=e.importData(a.target.result);l?alert("数据导入成功！"):alert("数据导入失败，请检查文件格式")},t.readAsText(l),a.target.value=""},n=()=>{confirm("确定要清除所有数据吗？这将恢复为默认图片数据。")&&(e.clearAllData(),a.value=!1,alert("数据已清除，已恢复默认图片"))};return{showDropdown:a,importInput:l,toggleDropdown:t,exportData:o,triggerImport:i,importData:r,clearData:n}}},Q=(0,j.A)(N,[["render",q],["__scopeId","data-v-4c830bf4"]]),z=Q,B={name:"App",components:{ImageUploadModal:G,DataManagement:z},setup(){const e=(0,m.KR)(!1),a=O(),l=()=>{e.value=!0},t=()=>{e.value=!1},s=e=>{a.addImage(e),t(),alert("图片上传成功！数据已保存到本地存储。")};return{showUploadModal:e,openUploadModal:l,closeUploadModal:t,handleUploadSuccess:s}}},H=(0,j.A)(B,[["render",v],["__scopeId","data-v-64e407be"]]),Y=H,Z={class:"home"},ee={class:"container"},ae={key:0,class:"notification success"},le={key:1,class:"notification info"},te={class:"categories-section"},se={class:"categories"},oe=["onClick"],ie={class:"gallery-section"},re={class:"gallery-header"},ne={class:"gallery-info"},ce={class:"image-count"},ue={class:"view-toggle"},de=["onClick"],ge={class:"image-wrapper"},pe=["src","alt","data-src"],ve={class:"image-overlay"},me={class:"image-actions"},ke=["onClick"],fe=["onClick"],Le=["onClick"],ye={class:"image-info"},be={class:"image-title"},Ie={class:"image-description"},he={class:"image-meta"},Ce={class:"image-category"},we={class:"image-date"},Ee={key:0,class:"empty-state"};function De(e,a,l,s,o,r){const n=(0,i.g2)("ImagePreviewModal"),c=(0,i.g2)("ImageEditModal");return(0,i.uX)(),(0,i.CE)("div",Z,[(0,i.Lk)("div",ee,[s.showUploadSuccess?((0,i.uX)(),(0,i.CE)("div",ae,[a[6]||(a[6]=(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1)),a[7]||(a[7]=(0,i.Lk)("span",null,"图片上传成功！数据已保存到本地存储。",-1)),(0,i.Lk)("button",{class:"close-notification",onClick:a[0]||(a[0]=e=>s.showUploadSuccess=!1)},[...a[5]||(a[5]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,i.Q3)("",!0),s.showEditSuccess?((0,i.uX)(),(0,i.CE)("div",le,[a[9]||(a[9]=(0,i.Lk)("i",{class:"fas fa-info-circle"},null,-1)),a[10]||(a[10]=(0,i.Lk)("span",null,"图片编辑成功！数据已保存到本地存储。",-1)),(0,i.Lk)("button",{class:"close-notification",onClick:a[1]||(a[1]=e=>s.showEditSuccess=!1)},[...a[8]||(a[8]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,i.Q3)("",!0),(0,i.Lk)("section",te,[a[11]||(a[11]=(0,i.Lk)("h2",{class:"section-title"},"图片分类",-1)),(0,i.Lk)("div",se,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.categories,e=>((0,i.uX)(),(0,i.CE)("button",{key:e,class:(0,k.C4)(["category-btn",{active:s.selectedCategory===e}]),onClick:a=>s.selectCategory(e)},(0,k.v_)(e),11,oe))),128))])]),(0,i.Lk)("section",ie,[(0,i.Lk)("div",re,[a[15]||(a[15]=(0,i.Lk)("h2",{class:"section-title"},"图片画廊",-1)),(0,i.Lk)("div",ne,[(0,i.Lk)("span",ce,(0,k.v_)(s.filteredImages.length)+" 张图片",1),(0,i.Lk)("span",{class:"storage-info",onClick:a[2]||(a[2]=(...e)=>s.showStorageInfo&&s.showStorageInfo(...e))},[...a[12]||(a[12]=[(0,i.Lk)("i",{class:"fas fa-database"},null,-1),(0,i.eW)(" 本地存储 ",-1)])]),(0,i.Lk)("div",ue,[(0,i.Lk)("button",{class:(0,k.C4)(["view-btn",{active:"grid"===s.viewMode}]),onClick:a[3]||(a[3]=e=>s.viewMode="grid")},[...a[13]||(a[13]=[(0,i.Lk)("i",{class:"fas fa-th-large"},null,-1)])],2),(0,i.Lk)("button",{class:(0,k.C4)(["view-btn",{active:"list"===s.viewMode}]),onClick:a[4]||(a[4]=e=>s.viewMode="list")},[...a[14]||(a[14]=[(0,i.Lk)("i",{class:"fas fa-list"},null,-1)])],2)])])]),(0,i.Lk)("div",{class:(0,k.C4)(["gallery",s.viewMode])},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filteredImages,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"image-item",onClick:a=>s.previewImage(e)},[(0,i.Lk)("div",ge,[(0,i.Lk)("img",{src:e.url,alt:e.title,"data-src":e.url,class:(0,k.C4)(["gallery-image",e.filter]),loading:"lazy"},null,10,pe),(0,i.Lk)("div",ve,[(0,i.Lk)("div",me,[(0,i.Lk)("button",{class:"action-btn",onClick:(0,t.D$)(a=>s.editImage(e),["stop"]),title:"编辑"},[...a[16]||(a[16]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)])],8,ke),(0,i.Lk)("button",{class:"action-btn",onClick:(0,t.D$)(a=>s.deleteImage(e.id),["stop"]),title:"删除"},[...a[17]||(a[17]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)])],8,fe),(0,i.Lk)("button",{class:"action-btn",onClick:(0,t.D$)(a=>s.applyFilterToImage(e.id,"grayscale"),["stop"]),title:"灰度滤镜"},[...a[18]||(a[18]=[(0,i.Lk)("i",{class:"fas fa-adjust"},null,-1)])],8,Le)])])]),(0,i.Lk)("div",ye,[(0,i.Lk)("h3",be,(0,k.v_)(e.title),1),(0,i.Lk)("p",Ie,(0,k.v_)(e.description),1),(0,i.Lk)("div",he,[(0,i.Lk)("span",Ce,(0,k.v_)(e.category),1),(0,i.Lk)("span",we,(0,k.v_)(e.createdAt),1)])])],8,de))),128))],2),0===s.filteredImages.length?((0,i.uX)(),(0,i.CE)("div",Ee,[...a[19]||(a[19]=[(0,i.Lk)("i",{class:"fas fa-images"},null,-1),(0,i.Lk)("h3",null,"暂无图片",-1),(0,i.Lk)("p",null,'点击顶部"上传图片"按钮添加第一张图片',-1)])])):(0,i.Q3)("",!0)])]),s.currentPreviewImage?((0,i.uX)(),(0,i.Wv)(n,{key:0,image:s.currentPreviewImage,onClose:s.closePreview,onEdit:s.editCurrentImage,onApplyFilter:s.applyFilterToCurrentImage},null,8,["image","onClose","onEdit","onApplyFilter"])):(0,i.Q3)("",!0),s.currentEditImage?((0,i.uX)(),(0,i.Wv)(c,{key:1,image:s.currentEditImage,onClose:s.closeEdit,onSave:s.saveImage},null,8,["image","onClose","onSave"])):(0,i.Q3)("",!0)])}const Fe={class:"modal-container"},Ue={class:"modal-header"},_e={class:"modal-content"},Te={class:"image-preview"},Ke=["src","alt"],Xe={class:"image-details"},Se={class:"detail-row"},Ae={class:"detail-row"},Re={class:"category-tag"},Pe={class:"detail-row"},xe={class:"tags"},Me={class:"detail-row"},Oe={class:"filter-controls"},We={class:"filter-options"},je=["onClick"],Je={class:"modal-footer"};function Ge(e,a,l,s,o,r){return(0,i.uX)(),(0,i.CE)("div",{class:"modal-overlay",onClick:a[3]||(a[3]=(0,t.D$)((...e)=>s.close&&s.close(...e),["self"]))},[(0,i.Lk)("div",Fe,[(0,i.Lk)("div",Ue,[(0,i.Lk)("h2",null,(0,k.v_)(l.image.title),1),(0,i.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=(...e)=>s.close&&s.close(...e))},[...a[4]||(a[4]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])])]),(0,i.Lk)("div",_e,[(0,i.Lk)("div",Te,[(0,i.Lk)("img",{src:l.image.url,alt:l.image.title,class:(0,k.C4)(["preview-image",l.image.filter])},null,10,Ke)]),(0,i.Lk)("div",Xe,[(0,i.Lk)("div",Se,[a[5]||(a[5]=(0,i.Lk)("label",null,"描述：",-1)),(0,i.Lk)("p",null,(0,k.v_)(l.image.description),1)]),(0,i.Lk)("div",Ae,[a[6]||(a[6]=(0,i.Lk)("label",null,"分类：",-1)),(0,i.Lk)("span",Re,(0,k.v_)(l.image.category),1)]),(0,i.Lk)("div",Pe,[a[7]||(a[7]=(0,i.Lk)("label",null,"标签：",-1)),(0,i.Lk)("div",xe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.image.tags,e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"tag"},(0,k.v_)(e),1))),128))])]),(0,i.Lk)("div",Me,[a[8]||(a[8]=(0,i.Lk)("label",null,"上传时间：",-1)),(0,i.Lk)("span",null,(0,k.v_)(l.image.createdAt),1)])]),(0,i.Lk)("div",Oe,[a[9]||(a[9]=(0,i.Lk)("h3",null,"应用滤镜",-1)),(0,i.Lk)("div",We,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filters,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.value,class:(0,k.C4)(["filter-btn",{active:l.image.filter===e.value}]),onClick:a=>s.applyFilter(e.value)},(0,k.v_)(e.label),11,je))),128))])])]),(0,i.Lk)("div",Je,[(0,i.Lk)("button",{class:"btn-secondary",onClick:a[1]||(a[1]=(...e)=>s.edit&&s.edit(...e))},[...a[10]||(a[10]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1),(0,i.eW)(" 编辑图片 ",-1)])]),(0,i.Lk)("button",{class:"btn-primary",onClick:a[2]||(a[2]=(...e)=>s.close&&s.close(...e))}," 关闭 ")])])])}const $e={name:"ImagePreviewModal",props:{image:{type:Object,required:!0}},emits:["close","edit","apply-filter"],setup(e,{emit:a}){const l=[{label:"无滤镜",value:"none"},{label:"灰度",value:"grayscale"},{label:"复古",value:"sepia"},{label:"模糊",value:"blur"},{label:"亮度",value:"brightness"},{label:"对比度",value:"contrast"}],t=()=>{a("close")},s=()=>{a("edit")},o=e=>{a("apply-filter",e)};return{filters:l,close:t,edit:s,applyFilter:o}}},Ve=(0,j.A)($e,[["render",Ge],["__scopeId","data-v-3d81c75a"]]),qe=Ve,Ne={class:"modal-container"},Qe={class:"modal-header"},ze={class:"modal-content"},Be={class:"edit-preview"},He=["src","alt"],Ye={class:"form-group"},Ze={class:"form-group"},ea={class:"form-group"},aa=["value"],la={class:"form-group"},ta={class:"tags-input"},sa={class:"tags-list"},oa=["onClick"],ia={class:"tag-input-container"},ra={class:"form-group"},na={class:"filter-options"},ca=["onClick"],ua={class:"form-group"},da={class:"modal-footer"};function ga(e,a,l,s,o,r){return(0,i.uX)(),(0,i.CE)("div",{class:"modal-overlay",onClick:a[12]||(a[12]=(0,t.D$)((...e)=>s.close&&s.close(...e),["self"]))},[(0,i.Lk)("div",Ne,[(0,i.Lk)("div",Qe,[a[14]||(a[14]=(0,i.Lk)("h2",null,"编辑图片信息",-1)),(0,i.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=(...e)=>s.close&&s.close(...e))},[...a[13]||(a[13]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])])]),(0,i.Lk)("div",ze,[(0,i.Lk)("div",Be,[(0,i.Lk)("img",{src:s.localImage.url,alt:s.localImage.title,class:(0,k.C4)(["edit-image",s.localImage.filter])},null,10,He)]),(0,i.Lk)("form",{onSubmit:a[9]||(a[9]=(0,t.D$)((...e)=>s.save&&s.save(...e),["prevent"])),class:"edit-form"},[(0,i.Lk)("div",Ye,[a[15]||(a[15]=(0,i.Lk)("label",{for:"title"},"标题",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":a[1]||(a[1]=e=>s.localImage.title=e),placeholder:"输入图片标题",required:""},null,512),[[t.Jo,s.localImage.title]])]),(0,i.Lk)("div",Ze,[a[16]||(a[16]=(0,i.Lk)("label",{for:"description"},"描述",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"description","onUpdate:modelValue":a[2]||(a[2]=e=>s.localImage.description=e),placeholder:"输入图片描述",rows:"3"},null,512),[[t.Jo,s.localImage.description]])]),(0,i.Lk)("div",ea,[a[17]||(a[17]=(0,i.Lk)("label",{for:"category"},"分类",-1)),(0,i.bo)((0,i.Lk)("select",{id:"category","onUpdate:modelValue":a[3]||(a[3]=e=>s.localImage.category=e)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.categories,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,k.v_)(e),9,aa))),128))],512),[[t.u1,s.localImage.category]])]),(0,i.Lk)("div",la,[a[20]||(a[20]=(0,i.Lk)("label",null,"标签",-1)),(0,i.Lk)("div",ta,[(0,i.Lk)("div",sa,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.localImage.tags,(e,l)=>((0,i.uX)(),(0,i.CE)("span",{key:l,class:"tag"},[(0,i.eW)((0,k.v_)(e)+" ",1),(0,i.Lk)("button",{type:"button",class:"remove-tag",onClick:e=>s.removeTag(l)},[...a[18]||(a[18]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)])],8,oa)]))),128))]),(0,i.Lk)("div",ia,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>s.newTag=e),placeholder:"输入标签后按Enter",onKeydown:a[5]||(a[5]=(0,t.jR)((0,t.D$)((...e)=>s.addTag&&s.addTag(...e),["prevent"]),["enter"]))},null,544),[[t.Jo,s.newTag]]),(0,i.Lk)("button",{type:"button",class:"add-tag-btn",onClick:a[6]||(a[6]=(...e)=>s.addTag&&s.addTag(...e))},[...a[19]||(a[19]=[(0,i.Lk)("i",{class:"fas fa-plus"},null,-1)])])])])]),(0,i.Lk)("div",ra,[a[21]||(a[21]=(0,i.Lk)("label",null,"滤镜效果",-1)),(0,i.Lk)("div",na,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filters,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.value,class:(0,k.C4)(["filter-option",{active:s.localImage.filter===e.value}]),onClick:a=>s.selectFilter(e.value)},[(0,i.Lk)("div",{class:(0,k.C4)(["filter-preview",e.value])},null,2),(0,i.Lk)("span",null,(0,k.v_)(e.label),1)],10,ca))),128))])]),(0,i.Lk)("div",ua,[a[25]||(a[25]=(0,i.Lk)("label",null,"更换图片",-1)),(0,i.Lk)("div",{class:"image-upload-area",onClick:a[8]||(a[8]=(...e)=>s.triggerFileInput&&s.triggerFileInput(...e))},[(0,i.Lk)("input",{type:"file",ref:"fileInput",onChange:a[7]||(a[7]=(...e)=>s.handleImageUpload&&s.handleImageUpload(...e)),accept:"image/*",style:{display:"none"}},null,544),a[22]||(a[22]=(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1)),a[23]||(a[23]=(0,i.Lk)("p",null,"点击上传新图片",-1)),a[24]||(a[24]=(0,i.Lk)("small",null,"支持 JPG, PNG, GIF 格式",-1))])])],32)]),(0,i.Lk)("div",da,[(0,i.Lk)("button",{type:"button",class:"btn-secondary",onClick:a[10]||(a[10]=(...e)=>s.close&&s.close(...e))}," 取消 "),(0,i.Lk)("button",{type:"submit",class:"btn-primary",onClick:a[11]||(a[11]=(...e)=>s.save&&s.save(...e))}," 保存更改 ")])])])}const pa={name:"ImageEditModal",props:{image:{type:Object,required:!0}},emits:["close","save"],setup(e,{emit:a}){const l=O(),t=(0,m.KR)({...e.image}),s=(0,m.KR)(""),o=(0,m.KR)(null),r=(0,i.EW)(()=>l.categories.filter(e=>"全部"!==e)),n=[{label:"无滤镜",value:"none"},{label:"灰度",value:"grayscale"},{label:"复古",value:"sepia"},{label:"模糊",value:"blur"},{label:"亮度",value:"brightness"},{label:"对比度",value:"contrast"}],c=()=>{a("close")},u=()=>{a("save",t.value)},d=()=>{s.value.trim()&&!t.value.tags.includes(s.value.trim())&&(t.value.tags.push(s.value.trim()),s.value="")},g=e=>{t.value.tags.splice(e,1)},p=e=>{t.value.filter=e},v=()=>{o.value.click()},k=e=>{const a=e.target.files[0];if(a)if(a.type.startsWith("image/")){const e=new FileReader;e.onload=e=>{t.value.url=e.target.result},e.readAsDataURL(a)}else alert("请选择图片文件")};return{localImage:t,newTag:s,fileInput:o,categories:r,filters:n,close:c,save:u,addTag:d,removeTag:g,selectFilter:p,triggerFileInput:v,handleImageUpload:k}}},va=(0,j.A)(pa,[["render",ga],["__scopeId","data-v-626334b9"]]),ma=va,ka={name:"Home",components:{ImagePreviewModal:qe,ImageEditModal:ma},setup(){const e=O(),a=(0,m.KR)("grid"),l=(0,m.KR)(!1),t=(0,m.KR)(!1),s=(0,i.EW)(()=>e.categories),o=(0,i.EW)(()=>e.selectedCategory),r=(0,i.EW)(()=>e.filteredImages),n=(0,i.EW)(()=>e.currentPreviewImage),c=(0,i.EW)(()=>e.currentEditImage),u=a=>{e.selectedCategory=a},d=a=>{e.setPreviewImage(a)},g=()=>{e.clearPreviewImage()},p=a=>{e.setEditImage(a)},v=()=>{n.value&&(e.setEditImage(n.value),e.clearPreviewImage())},k=()=>{e.setEditImage(null)},f=a=>{e.updateImage(a.id,a),k(),t.value=!0,setTimeout(()=>{t.value=!1},3e3)},L=a=>{confirm("确定要删除这张图片吗？")&&(e.deleteImage(a),alert("图片删除成功！"))},y=(a,l)=>{e.applyFilter(a,l)},b=a=>{n.value&&e.applyFilter(n.value.id,a)},I=()=>{const a=e.getImages.length;alert(`当前共有 ${a} 张图片\n数据已保存到浏览器本地存储中\n刷新页面或重新打开浏览器不会丢失数据`)},h=()=>{l.value=!0,setTimeout(()=>{l.value=!1},3e3)};return{viewMode:a,showUploadSuccess:l,showEditSuccess:t,categories:s,selectedCategory:o,filteredImages:r,currentPreviewImage:n,currentEditImage:c,selectCategory:u,previewImage:d,closePreview:g,editImage:p,editCurrentImage:v,closeEdit:k,saveImage:f,deleteImage:L,applyFilterToImage:y,applyFilterToCurrentImage:b,showStorageInfo:I,handleUploadSuccess:h}}},fa=(0,j.A)(ka,[["render",De],["__scopeId","data-v-b4ab47ec"]]),La=fa,ya=(0,s.Ey)(),ba=(0,o.aE)({history:(0,o.LA)(),routes:[{path:"/",name:"Home",component:La}]}),Ia=(0,t.Ef)(Y);Ia.use(ya),Ia.use(ba),Ia.mount("#app")}},a={};function l(t){var s=a[t];if(void 0!==s)return s.exports;var o=a[t]={exports:{}};return e[t](o,o.exports,l),o.exports}l.m=e,(()=>{var e=[];l.O=(a,t,s,o)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){for(var[t,s,o]=e[u],r=!0,n=0;n<t.length;n++)(!1&o||i>=o)&&Object.keys(l.O).every(e=>l.O[e](t[n]))?t.splice(n--,1):(r=!1,o<i&&(i=o));if(r){e.splice(u--,1);var c=s();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,s,o]}})(),(()=>{l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={524:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var s,o,[i,r,n]=t,c=0;if(i.some(a=>0!==e[a])){for(s in r)l.o(r,s)&&(l.m[s]=r[s]);if(n)var u=n(l)}for(a&&a(t);c<i.length;c++)o=i[c],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},t=self["webpackChunkimage_gallery1"]=self["webpackChunkimage_gallery1"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var t=l.O(void 0,[504],()=>l(176));t=l.O(t)})();
//# sourceMappingURL=app.8592230c.js.map